!function e(n,t,o){function r(c,a){if(!t[c]){if(!n[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(i)return i(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[c]={exports:{}};n[c][0].call(l.exports,function(e){var t=n[c][1][e];return r(t?t:e)},l,l.exports,e,n,t,o)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,n,t){var o=e("./lib"),r={};window.angular?window.angular.module("Snoopy.Client",["ng"]).service("Snoopy",o):console.warn("Could not detect Angular..."),n.exports=r},{"./lib":10}],2:[function(e,n,t){"use strict";var o=e("../config"),r=e("../logger"),i=e("../threshold-manager"),c=e("./web-socket"),a=e("./xhr");n.exports={send:function(e){i.increment(),e.clientSession=o.sessionId,e.timestamp=Date.now(),e.timeline=r.all(),c.isActive?c.send(e):a.send(e),r.clear()},announce:function(e){a.announce(e)}}},{"../config":5,"../logger":11,"../threshold-manager":12,"./web-socket":3,"./xhr":4}],3:[function(e,n,t){"use strict";function o(){r=window.io.connect(i.webSocketServerUrl+i.sessionUuid,{query:"token="+i.token}),r.on("connect",function(){s=!0}).on("disconnect",function(){s=!1}).on("error",function(){s=!1})}var r,i=e("../config"),c=!1,a=!1,s=!1;n.exports={loadScript:function(){c=!0;var e=document.createElement("script");e.src="https://cdn.socket.io/socket.io-1.3.7.js",e.async=!0,e.onload=function(){c=!1,a=!0,o()},document.head.appendChild(e)},get isActive(){return a&&s},get isLoading(){return c},get isLoaded(){return a},send:function(e){r.emit("exception",e)}}},{"../config":5}],4:[function(e,n,t){"use strict";function o(e,n,t,o){var r=new(window.XMLHttpRequest||window.ActiveXObject)("MSXML2.XMLHTTP.3.0");r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.onreadystatechange=function(){r.readyState>3&&(r.status>0&&r.status<400?t(JSON.parse(r.responseText)):o(r.status,r.responseText))},r.send(JSON.stringify(n))}var r=e("../config"),i=0;n.exports={announce:function(e,n){try{o(r.announceUrl,{applicationId:r.applicationId,sessionUuid:r.sessionUuid,sessionStartTimeStamp:r.sessionStartTimeStamp,clientId:r.clientId,clientVersion:r.clientVersion,device:{viewport:{width:window.innerWidth,height:window.innerHeight}}},e,n)}catch(t){console.error(t),i++,n()}},send:function(e){o(r.xhrExceptionUrl,e,function(){},function(){})},get shouldAnnounce(){return 3>i}}},{"../config":5}],5:[function(e,n,t){"use strict";var o=e("./util");n.exports={update:function(e){o.extend(this,e)},serverUrl:"http://localhost:8081/",get announceUrl(){return this.webSocketServerUrl+"application/announce"},get loggingUrl(){return this.serverUrl+"log.gif"},get trackingUrl(){return this.serverUrl+"track.gif"},get xhrExceptionUrl(){return this.webSocketServerUrl+"exception"},get webSocketServerUrl(){return"http://localhost:8082/"},applicationId:null,realtimeErrorThreshold:0,trackUserInteraction:!0,validElements:["button","input"],sessionUuid:o.uuid(),sessionStartTimeStamp:Date.now(),clientId:"Not Set",clientVersion:"Not Set",token:null}},{"./util":13}],6:[function(e,n,t){"use strict";function o(e,n){return"function"!=typeof e?e:(e._original||(e._original=function(t){n&&n.eventHandler&&(f=t);try{return e.apply(this,arguments)}catch(o){throw m.handle(o,!0),o}},e._original._original=e._original),e._original)}function r(e){return function(n,t,r,i){return t&&t.handleEvent&&(t.handleEvent=o(t.handleEvent,{eventHandler:!0})),e.call(this,n,o(t,{eventHandler:!0}),r,i)}}function i(e){return function(n,t){return e(o(n),t)}}function c(e){return function(n,t,o,r,i){window.setTimeout(function(){m.handleOnError(n,t,o,r,i)}),e&&e(n,t,o,r,i)}}function a(e){for(var n={},t=0;t<e.attributes.length;t++)"value"!==e.attributes[t].name.toLowerCase()&&(n[e.attributes[t].name]=e.attributes[t].value);return n}function s(e){return e.target||document.elementFromPoint(e.clientX,e.clientY)}function u(e){return g.indexOf(e.tagName.toLowerCase())>-1}function l(e){try{var n=s(e);u(n)&&p.add("ui",{action:e.type,element:{tag:n.tagName.toLowerCase(),attributes:a(n)}})}catch(e){}}function d(e){return function(){var n=Array.prototype.slice.call(arguments);p.add("c",{severity:e.name,message:n.join(",")}),e.apply(window.console,arguments)}}var f,m=e("../exceptions/handler"),p=e("../logger"),g=["button","input"];n.exports={decorate:function(e,n,t,o){if("element"===t)return document.addEventListener("click",l),void(o.elementTypes&&(g=o.elementTypes));var a,s=e[n];switch(t){case"event":a=r;break;case"timer":a=i;break;case"onerror":a=c;break;case"console":a=d}e[n]=a(s)}}},{"../exceptions/handler":8,"../logger":11}],7:[function(e,n,t){"use strict";var o=e("./decorator"),r=(e("../logger"),["debug","error","info","log","warn"]),i=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame;n.exports={init:function(e){o.decorate(window,"onerror","onerror"),o.decorate(window,"setTimeout","timer"),o.decorate(window,"setInterval","timer"),r.forEach(function(e){o.decorate(window.console,e,"console")}),i&&o.decorate(window,"requestAnimationFrame","timer"),e.userInteraction.allow&&o.decorate(null,null,"element",e.userInteraction)}}},{"../logger":11,"./decorator":6}],8:[function(e,n,t){"use strict";var o=e("../communication"),r=e("./stacktrace"),i=0;n.exports={handle:function(e,n){o.send({name:name||e.name,message:e.message||e.description,stacktrace:r.fromException(e),file:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line}),n&&(i+=1,window.setTimeout(function(){i-=1}))},handleOnError:function(e,n,t,c,a){0===i&&o.send({name:a&&a.name||"window.onerror",message:e,file:n,lineNumber:t,columnNumber:c,stacktrace:a&&r.fromException(a)})}}},{"../communication":2,"./stacktrace":9}],9:[function(e,n,t){"use strict";var o=/function\s*([\w\-$]+)?\s*\(/i,r=10,i="[anonymous]";n.exports={fromException:function(e){return e.stacktrace?e.stacktrace:e.stack?e.stack:e.backtrace?e.backtrace:this.generate()},generate:function(){var e;try{throw new Error("")}catch(n){e=this.fromException(n)}if(!e){for(var t=[],c=arguments.callee.caller.caller;c&&t.length<r;){var a=o.test(c.toString())?RegExp.$1||i:i;t.push(a),c=c.caller}e=t.join("\n")}return e}}},{}],10:[function(e,n,t){"use strict";var o=e("./config"),r=e("./communication"),i=e("./decorators"),c=e("./threshold-manager");window.Snoopy&&o.update(window.Snoopy),r.announce(function(e){c.init(e),i.init(e),o.token=e.token,o.sessionId=e.sessionId},function(e,n){console.error("Snoopy failed to announce",e,n)}),n.exports={config:o,send:r.send}},{"./communication":2,"./config":5,"./decorators":7,"./threshold-manager":12}],11:[function(e,n,t){"use strict";var o=30,r=[];n.exports={all:function(){return r},clear:function(){r.length=0},truncate:function(){r.length>o&&(r=r.slice(Math.max(r.length-o,0)))},add:function(e,n){n.timestamp=Date.now(),n.category=e,r.push(n),this.truncate()}}},{}],12:[function(e,n,t){"use strict";var o=(e("./config"),e("./communication/web-socket")),r=0,i=0,c=!1;n.exports={init:function(e){r=e.threshold.errorCount||10},increment:function(){i++,!this.thresholdMet||o.isLoaded||o.isLoading||o.loadScript()},get thresholdMet(){return c?!0:i>=r?c=!0:!1}}},{"./communication/web-socket":3,"./config":5}],13:[function(e,n,t){"use strict";n.exports={extend:function(e){var n=Array.prototype.slice.call(arguments),t=n.slice(1),o=function(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])};return t.forEach(o),e},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"==e?n:3&n|8).toString(16)})}}},{}]},{},[1]);